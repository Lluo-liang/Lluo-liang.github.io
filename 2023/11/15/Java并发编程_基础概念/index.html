

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/Xbox%20L.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Luo QI">
  <meta name="keywords" content="">
  
    <meta name="description" content="Javaå¤šçº¿ç¨‹_åŸºç¡€æ¦‚å¿µ">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaå¹¶å‘ç¼–ç¨‹_åŸºç¡€æ¦‚å¿µ">
<meta property="og:url" content="https://varcel.luoqi.icu/2023/11/15/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B_%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/index.html">
<meta property="og:site_name" content="è½»æ¾çš„æ´›äº“">
<meta property="og:description" content="Javaå¤šçº¿ç¨‹_åŸºç¡€æ¦‚å¿µ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202401191403753.png">
<meta property="og:image" content="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/20240304152134.png">
<meta property="og:image" content="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202311161130480.png">
<meta property="og:image" content="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202311161129688.png">
<meta property="og:image" content="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/20240304154734.png">
<meta property="og:image" content="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/20240304162424.png">
<meta property="article:published_time" content="2023-11-15T23:47:00.000Z">
<meta property="article:modified_time" content="2023-11-15T23:47:00.000Z">
<meta property="article:author" content="Luo QI">
<meta property="article:tag" content="java">
<meta property="article:tag" content="thread">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202401191403753.png">
  
  
  
  <title>Javaå¹¶å‘ç¼–ç¨‹_åŸºç¡€æ¦‚å¿µ - è½»æ¾çš„æ´›äº“</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"varcel.luoqi.icu","root":"/","version":"1.9.5-a","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  <meta name="baidu-site-verification" content="codeva-Oq0KOjHuD3" />
<meta name="generator" content="Hexo 7.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>è½»æ¾çš„æ´›äº“</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202311161042719.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Javaå¹¶å‘ç¼–ç¨‹_åŸºç¡€æ¦‚å¿µ"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-15 23:47" pubdate>
          2023å¹´11æœˆ15æ—¥ æ™šä¸Š
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          19k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          156 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Javaå¹¶å‘ç¼–ç¨‹_åŸºç¡€æ¦‚å¿µ</h1>
            
            
              <div class="markdown-body">
                
                <blockquote>
<p>å¤§çº²</p>
</blockquote>
<ul>
<li>çº¿ç¨‹åŸºç¡€æ¦‚å¿µ</li>
<li>Java çº¿ç¨‹</li>
<li>ç”Ÿå‘½å‘¨æœŸ</li>
<li>åˆ›å»ºçº¿ç¨‹</li>
<li>çº¿ç¨‹çš„è°ƒç”¨æ–¹æ³•</li>
<li>Synchronized å’Œ Lock</li>
</ul>
<p>çº¿ç¨‹</p>
<p><img src="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202401191403753.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<h3 id="1ã€åŸºç¡€æ¦‚å¿µ"><a href="#1ã€åŸºç¡€æ¦‚å¿µ" class="headerlink" title="1ã€åŸºç¡€æ¦‚å¿µ"></a>1ã€åŸºç¡€æ¦‚å¿µ</h3><p>è¿›ç¨‹å’Œçº¿ç¨‹</p>
<ul>
<li>è¿›ç¨‹ï¼ˆProcessï¼‰æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ã€‚</li>
<li>çº¿ç¨‹ï¼ˆThreadï¼‰æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚</li>
</ul>
<blockquote>
<p>é¢è¯•é¢˜ï¼šçº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ</p>
</blockquote>
<p>è¿›ç¨‹ï¼š</p>
<p>ç¨‹åºç”±æŒ‡ä»¤å’Œæ•°æ®ç»„æˆï¼Œä½†è¿™äº›æŒ‡ä»¤è¦è¿è¡Œï¼Œæ•°æ®è¦è¯»å†™ï¼Œå°±å¿…é¡»å°†æŒ‡ä»¤åŠ è½½è‡³CPU,æ•°æ®åŠ è½½è‡³å†…å­˜ã€‚</p>
<p>åœ¨æŒ‡ä»¤è¿è¡Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦ç”¨åˆ°ç£ç›˜ã€ç½‘ç»œç­‰è®¾å¤‡ã€‚</p>
<p>è¿›ç¨‹å°±æ˜¯ç”¨æ¥åŠ è½½æŒ‡ä»¤ã€ç®¡ç†å†…å­˜ã€ç®¡ç† IO çš„ã€‚</p>
<p>å½“ä¸€ä¸ªç¨‹åºè¢«è¿è¡Œï¼Œä»ç£ç›˜åŠ è½½è¿™ä¸ªç¨‹åºçš„ä»£ç è‡³å†…å­˜ï¼Œè¿™æ—¶å°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<p>çº¿ç¨‹ï¼š</p>
<p>ä¸€ä¸ªçº¿ç¨‹å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤æµï¼Œå°†æŒ‡ä»¤æµä¸­çš„ä¸€æ¡æ¡æŒ‡ä»¤ä»¥ä¸€å®šçš„é¡ºåºäº¤ç»™CPUæ‰§è¡Œï¼Œä¸€ä¸ªè¿›ç¨‹ä¹‹å†…å¯ä»¥åˆ†ä¸ºä¸€åˆ°å¤šä¸ªçº¿ç¨‹ã€‚</p>
<blockquote>
<p>äºŒè€…å¯¹æ¯”</p>
</blockquote>
<ul>
<li>è¿›ç¨‹æ˜¯æ­£åœ¨è¿è¡Œç¨‹åºçš„å®ä¾‹ï¼Œè¿›ç¨‹ä¸­åŒ…å«äº†çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸åŒçš„ä»»åŠ¡</li>
<li>ä¸åŒçš„è¿›ç¨‹ä½¿ç”¨ä¸åŒçš„å†…å­˜ç©ºé—´ï¼Œåœ¨å½“å‰è¿›ç¨‹ä¸‹çš„æ‰€æœ‰çº¿ç¨‹å¯ä»¥å…±äº«å†…å­˜ç©ºé—´</li>
<li>çº¿ç¨‹æ›´è½»é‡ï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ä¸€èˆ¬ä¸Šè¦æ¯”è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä½ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢æŒ‡çš„æ˜¯ä»ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼‰</li>
</ul>
<hr>
<p>å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«</p>
<ul>
<li>å¹¶è¡Œï¼šä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€Â <strong>æ—¶åˆ»</strong>Â æ‰§è¡Œã€‚</li>
<li>å¹¶å‘ï¼šä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€Â <strong>æ—¶é—´æ®µ</strong>Â å†…æ‰§è¡Œã€‚</li>
</ul>
<p>æœ€å…³é”®çš„ç‚¹æ˜¯ï¼šæ˜¯å¦æ˜¯Â <strong>åŒæ—¶</strong>Â æ‰§è¡Œ</p>
<blockquote>
<p>é¢è¯•é¢˜ï¼šå¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
</blockquote>
<p>å•æ ¸CPU</p>
<ul>
<li>å•æ ¸CPUä¸‹çº¿ç¨‹å®é™…è¿˜æ˜¯ä¸²è¡Œæ‰§è¡Œçš„</li>
<li>æ“ä½œç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªç»„ä»¶å«åšä»»åŠ¡è°ƒåº¦å™¨ï¼Œå°†cpuçš„æ—¶é—´ç‰‡(windowsä¸‹æ—¶é—´ç‰‡æœ€å°çº¦ä¸º15æ¯«ç§’)åˆ†ç»™ä¸åŒçš„ç¨‹åºä½¿ç”¨ï¼Œåªæ˜¯ç”±äºcpuåœ¨çº¿ç¨‹é—´ï¼ˆæ—¶é—´ç‰‡å¾ˆçŸ­ï¼‰çš„åˆ‡æ¢éå¸¸å¿«ï¼Œäººç±»æ„Ÿè§‰æ˜¯åŒæ—¶è¿è¡Œçš„ã€‚</li>
<li>æ€»ç»“ä¸ºä¸€å¥è¯å°±æ˜¯ï¼šå¾®è§‚ä¸²è¡Œï¼Œå®è§‚å¹¶è¡Œ</li>
</ul>
<p>ä¸€èˆ¬ä¼šå°†è¿™ç§çº¿ç¨‹è½®æµä½¿ç”¨ CPUçš„åšæ³• ç§°ä¸ºå¹¶å‘(concurrentï¼‰</p>
<p>å¤šæ ¸ CPU</p>
<p>æ¯ä¸ªæ ¸(core)éƒ½å¯ä»¥è°ƒåº¦è¿è¡Œçº¿ç¨‹ï¼Œè¿™æ—¶å€™çº¿ç¨‹å¯ä»¥æ˜¯å¹¶è¡Œçš„ã€‚</p>
<p><img src="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/20240304152134.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>æ€»ç»“</p>
<p>å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«</p>
<ul>
<li>ç°åœ¨éƒ½æ˜¯å¤šæ ¸CPU,åœ¨å¤šæ ¸CPUä¸‹<ul>
<li>å¹¶å‘æ˜¯åŒä¸€æ—¶é—´<strong>åº”å¯¹</strong>å¤šä»¶äº‹æƒ…çš„èƒ½åŠ›ï¼Œå¤šä¸ªçº¿ç¨‹è½®æµä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªCPU</li>
<li>å¹¶è¡Œæ˜¯åŒä¸€æ—¶é—´<strong>åŠ¨æ‰‹</strong>åšå¤šä»¶äº‹æƒ…çš„èƒ½åŠ›ï¼Œ4æ ¸CPUåŒæ—¶æ‰§è¡Œ4ä¸ªçº¿ç¨‹</li>
</ul>
</li>
</ul>
<hr>
<p>åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«</p>
<ul>
<li><strong>åŒæ­¥</strong>ï¼šå‘å‡ºä¸€ä¸ªè°ƒç”¨ä¹‹åï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œ è¯¥è°ƒç”¨å°±ä¸å¯ä»¥è¿”å›ï¼Œä¸€ç›´ç­‰å¾…ã€‚</li>
<li><strong>å¼‚æ­¥</strong>ï¼šè°ƒç”¨åœ¨å‘å‡ºä¹‹åï¼Œ<strong>ä¸ç”¨ç­‰å¾…è¿”å›ç»“æœ</strong>ï¼Œè¯¥è°ƒç”¨ç›´æ¥è¿”å›ã€‚</li>
</ul>
<h3 id="2ã€ä»€ä¹ˆæ˜¯Java-çº¿ç¨‹"><a href="#2ã€ä»€ä¹ˆæ˜¯Java-çº¿ç¨‹" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯Java çº¿ç¨‹"></a>2ã€ä»€ä¹ˆæ˜¯Java çº¿ç¨‹</h3><p>åœ¨ JDK 1.2 åŠä»¥åï¼ŒJava çº¿ç¨‹åŸºäºåŸç”Ÿçº¿ç¨‹ï¼ˆNative Threadsï¼‰å®ç°ï¼Œ JVM ç›´æ¥ä½¿ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿçš„å†…æ ¸çº§çº¿ç¨‹ï¼ˆå†…æ ¸çº¿ç¨‹ï¼‰æ¥å®ç° Java çº¿ç¨‹ï¼Œç”±æ“ä½œç³»ç»Ÿå†…æ ¸è¿›è¡Œçº¿ç¨‹çš„è°ƒåº¦å’Œç®¡ç†ã€‚</p>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬ Java çº¿ç¨‹å’Œæ“ä½œç³»ç»Ÿçº¿ç¨‹çš„å…³ç³»ï¼š<strong>ç°åœ¨çš„ Java çº¿ç¨‹çš„æœ¬è´¨å…¶å®å°±æ˜¯æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹</strong>ã€‚</p>
<p>åœ¨ Windows å’Œ Linux ç­‰ä¸»æµæ“ä½œç³»ç»Ÿä¸­ï¼ŒJava çº¿ç¨‹é‡‡ç”¨çš„æ˜¯ä¸€å¯¹ä¸€çš„çº¿ç¨‹æ¨¡å‹ï¼Œä¸€ä¸ª Java çº¿ç¨‹å¯¹åº”ä¸€ä¸ªç³»ç»Ÿå†…æ ¸çº¿ç¨‹ã€‚</p>
<h3 id="3ã€çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåŠäº”ç§åŸºæœ¬çŠ¶æ€"><a href="#3ã€çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåŠäº”ç§åŸºæœ¬çŠ¶æ€" class="headerlink" title="3ã€çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåŠäº”ç§åŸºæœ¬çŠ¶æ€"></a>3ã€çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåŠäº”ç§åŸºæœ¬çŠ¶æ€</h3><p>äº”ç§åŸºæœ¬çŠ¶æ€ï¼šæ–°å»ºï¼Œå°±ç»ªï¼Œé˜»å¡ï¼Œè¿è¡Œï¼Œæ­»äº¡</p>
<p><img src="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202311161130480.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>å…³äºJavaä¸­çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹ä¸‹é¢è¿™å¼ è¾ƒä¸ºç»å…¸çš„å›¾ï¼š</p>
<p><img src="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/202311161129688.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>ä¸Šå›¾ä¸­åŸºæœ¬ä¸Šå›Šæ‹¬äº†Javaä¸­å¤šçº¿ç¨‹å„é‡è¦çŸ¥è¯†ç‚¹ã€‚æŒæ¡äº†ä¸Šå›¾ä¸­çš„å„çŸ¥è¯†ç‚¹ï¼ŒJavaä¸­çš„å¤šçº¿ç¨‹ä¹Ÿå°±åŸºæœ¬ä¸ŠæŒæ¡äº†ã€‚ä¸»è¦åŒ…æ‹¬ï¼š</p>
<p>Javaçº¿ç¨‹å…·æœ‰äº”ä¸­åŸºæœ¬çŠ¶æ€</p>
<ul>
<li>æ–°å»ºçŠ¶æ€ï¼ˆNewï¼‰<ul>
<li>å½“çº¿ç¨‹å¯¹è±¡å¯¹åˆ›å»ºåï¼Œå³è¿›å…¥äº†æ–°å»ºçŠ¶æ€ï¼Œå¦‚ï¼šThread t &#x3D; new MyThread();</li>
</ul>
</li>
<li>å°±ç»ªçŠ¶æ€ï¼ˆRunnableï¼‰<ul>
<li>å½“è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•ï¼ˆt.start();ï¼‰ï¼Œçº¿ç¨‹å³è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚</li>
<li>å¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹ï¼Œåªæ˜¯è¯´æ˜æ­¤çº¿ç¨‹å·²ç»åšå¥½äº†å‡†å¤‡ï¼Œéšæ—¶ç­‰å¾…CPUè°ƒåº¦æ‰§è¡Œï¼Œå¹¶ä¸æ˜¯è¯´æ‰§è¡Œäº†t.start()æ­¤çº¿ç¨‹ç«‹å³å°±ä¼šæ‰§è¡Œï¼›</li>
</ul>
</li>
<li>è¿è¡ŒçŠ¶æ€ï¼ˆRunningï¼‰<ul>
<li>å½“CPUå¼€å§‹è°ƒåº¦å¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹æ—¶ï¼Œæ­¤æ—¶çº¿ç¨‹æ‰å¾—ä»¥çœŸæ­£æ‰§è¡Œï¼Œå³è¿›å…¥åˆ°è¿è¡ŒçŠ¶æ€ã€‚</li>
<li>æ³¨ï¼šå°± ç»ªçŠ¶æ€æ˜¯è¿›å…¥åˆ°è¿è¡ŒçŠ¶æ€çš„å”¯ä¸€å…¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ç¨‹è¦æƒ³è¿›å…¥è¿è¡ŒçŠ¶æ€æ‰§è¡Œï¼Œé¦–å…ˆå¿…é¡»å¤„äºå°±ç»ªçŠ¶æ€ä¸­</li>
</ul>
</li>
<li>é˜»å¡çŠ¶æ€ï¼ˆBlockedï¼‰<ul>
<li>å¤„äºè¿è¡ŒçŠ¶æ€ä¸­çš„çº¿ç¨‹ç”±äºæŸç§åŸå› ï¼Œæš‚æ—¶æ”¾å¼ƒå¯¹CPUçš„ä½¿ç”¨æƒï¼Œåœæ­¢æ‰§è¡Œï¼Œæ­¤æ—¶è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°å…¶è¿›å…¥åˆ°å°±ç»ªçŠ¶æ€ï¼Œæ‰ æœ‰æœºä¼šå†æ¬¡è¢«CPUè°ƒç”¨ä»¥è¿›å…¥åˆ°è¿è¡ŒçŠ¶æ€ã€‚</li>
<li>æ ¹æ®é˜»å¡äº§ç”Ÿçš„åŸå› ä¸åŒï¼Œé˜»å¡çŠ¶æ€åˆå¯ä»¥åˆ†ä¸ºä¸‰ç§<ul>
<li><strong>1.ç­‰å¾…é˜»å¡ï¼šè¿è¡ŒçŠ¶æ€ä¸­çš„çº¿ç¨‹æ‰§è¡Œwait()æ–¹æ³•ï¼Œä½¿æœ¬çº¿ç¨‹è¿›å…¥åˆ°ç­‰å¾…é˜»å¡çŠ¶æ€</strong>ï¼›</li>
<li><strong>2.åŒæ­¥é˜»å¡ :</strong> çº¿ç¨‹åœ¨è·å–synchronizedåŒæ­¥é”å¤±è´¥(å› ä¸ºé”è¢«å…¶å®ƒçº¿ç¨‹æ‰€å ç”¨)ï¼Œå®ƒä¼šè¿›å…¥åŒæ­¥é˜»å¡çŠ¶æ€ï¼›</li>
<li><strong>3.å…¶ä»–é˜»å¡ :</strong> é€šè¿‡è°ƒç”¨çº¿ç¨‹çš„sleep()æˆ–join()æˆ–å‘å‡ºäº†I&#x2F;Oè¯·æ±‚æ—¶ï¼Œçº¿ç¨‹ä¼šè¿›å…¥åˆ°é˜»å¡çŠ¶æ€ã€‚å½“sleep()çŠ¶æ€è¶…æ—¶ã€join()ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è€…è¶…æ—¶ã€æˆ–è€…I&#x2F;Oå¤„ç†å®Œæ¯•æ—¶ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å°±ç»ªçŠ¶æ€ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>æ­»äº¡çŠ¶æ€ï¼ˆDeadï¼‰<ul>
<li>çº¿ç¨‹æ‰§è¡Œå®Œäº†æˆ–è€…å› å¼‚å¸¸é€€å‡ºäº†run()æ–¹æ³•ï¼Œè¯¥çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>Javaå¤šçº¿ç¨‹çš„å°±ç»ªã€è¿è¡Œå’Œæ­»äº¡çŠ¶æ€</p>
</blockquote>
<p>å°±ç»ªçŠ¶æ€è½¬æ¢ä¸ºè¿è¡ŒçŠ¶æ€ï¼šå½“æ­¤çº¿ç¨‹å¾—åˆ°å¤„ç†å™¨èµ„æºï¼›</p>
<p>è¿è¡ŒçŠ¶æ€è½¬æ¢ä¸ºå°±ç»ªçŠ¶æ€ï¼šå½“æ­¤çº¿ç¨‹ä¸»åŠ¨è°ƒç”¨yield()æ–¹æ³•æˆ–åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¤±å»å¤„ç†å™¨èµ„æºã€‚</p>
<p>è¿è¡ŒçŠ¶æ€è½¬æ¢ä¸ºæ­»äº¡çŠ¶æ€ï¼šå½“æ­¤çº¿ç¨‹çº¿ç¨‹æ‰§è¡Œä½“æ‰§è¡Œå®Œæ¯•æˆ–å‘ç”Ÿäº†å¼‚å¸¸ã€‚</p>
<p>æ­¤å¤„éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šå½“è°ƒç”¨çº¿ç¨‹çš„yield()æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬æ¢ä¸ºå°±ç»ªçŠ¶æ€ï¼Œä½†æ¥ä¸‹æ¥CPUè°ƒåº¦å°±ç»ªçŠ¶æ€ä¸­çš„å“ªä¸ªçº¿ç¨‹å…·æœ‰ä¸€å®šçš„éšæœºæ€§ï¼Œå› æ­¤ï¼Œå¯èƒ½ä¼šå‡ºç°Açº¿ç¨‹è°ƒç”¨äº†yield()æ–¹æ³•åï¼Œæ¥ä¸‹æ¥CPUä»ç„¶è°ƒåº¦äº†Açº¿ç¨‹çš„æƒ…å†µã€‚</p>
<hr>
<p>åœ¨ Java çš„ Thread ç±»ä¸­ï¼Œæœ‰ä¸€ä¸ª State çš„æšä¸¾</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs pf">/**<br> * A thread <span class="hljs-keyword">state</span>.  A thread can be <span class="hljs-keyword">in</span> one of the following states:<br> * <span class="hljs-variable">&lt;ul&gt;</span><br> * <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#NEW&#125;&lt;br&gt;</span><br> *     A thread that has not yet started is <span class="hljs-keyword">in</span> this <span class="hljs-keyword">state</span>.<br> *     &lt;/li&gt;<br> * <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#RUNNABLE&#125;&lt;br&gt;</span><br> *     A thread executing <span class="hljs-keyword">in</span> the Java virtual machine is <span class="hljs-keyword">in</span> this <span class="hljs-keyword">state</span>.<br> *     &lt;/li&gt;<br> * <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#BLOCKED&#125;&lt;br&gt;</span><br> *     A thread that is blocked waiting <span class="hljs-keyword">for</span> a monitor lock<br> *     is <span class="hljs-keyword">in</span> this <span class="hljs-keyword">state</span>.<br> *     &lt;/li&gt;<br> * <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#WAITING&#125;&lt;br&gt;</span><br> *     A thread that is waiting indefinitely <span class="hljs-keyword">for</span> another thread <span class="hljs-keyword">to</span><br> *     perform a particular action is <span class="hljs-keyword">in</span> this <span class="hljs-keyword">state</span>.<br> *     &lt;/li&gt;<br> * <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#TIMED_WAITING&#125;&lt;br&gt;</span><br> *     A thread that is waiting <span class="hljs-keyword">for</span> another thread <span class="hljs-keyword">to</span> perform an action<br> *     <span class="hljs-keyword">for</span> up <span class="hljs-keyword">to</span> a specified waiting time is <span class="hljs-keyword">in</span> this <span class="hljs-keyword">state</span>.<br> *     &lt;/li&gt;<br> * <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#TERMINATED&#125;&lt;br&gt;</span><br> *     A thread that has exited is <span class="hljs-keyword">in</span> this <span class="hljs-keyword">state</span>.<br> *     &lt;/li&gt;<br> * &lt;/ul&gt;<br> *<br> * <span class="hljs-variable">&lt;p&gt;</span><br> * A thread can be <span class="hljs-keyword">in</span> only one <span class="hljs-keyword">state</span> at a given point <span class="hljs-keyword">in</span> time.<br> * These states are virtual machine states which do not reflect<br> * <span class="hljs-literal">any</span> operating system thread states.<br> *<br> * @since   <span class="hljs-number">1.5</span><br> * @see <span class="hljs-comment">#getState</span><br> */<br>public enum State &#123;<br>    /**<br>     * Thread <span class="hljs-keyword">state</span> <span class="hljs-keyword">for</span> a thread which has not yet started.<br>     */<br>    NEW,<br><br>    /**<br>     * Thread <span class="hljs-keyword">state</span> <span class="hljs-keyword">for</span> a runnable thread.  A thread <span class="hljs-keyword">in</span> the runnable<br>     * <span class="hljs-keyword">state</span> is executing <span class="hljs-keyword">in</span> the Java virtual machine but it may<br>     * be waiting <span class="hljs-keyword">for</span> other resources <span class="hljs-keyword">from</span> the operating system<br>     * such as processor.<br>     */<br>    RUNNABLE,<br><br>    /**<br>     * Thread <span class="hljs-keyword">state</span> <span class="hljs-keyword">for</span> a thread blocked waiting <span class="hljs-keyword">for</span> a monitor lock.<br>     * A thread <span class="hljs-keyword">in</span> the blocked <span class="hljs-keyword">state</span> is waiting <span class="hljs-keyword">for</span> a monitor lock<br>     * <span class="hljs-keyword">to</span> enter a synchronized <span class="hljs-built_in">block</span>/method or<br>     * reenter a synchronized <span class="hljs-built_in">block</span>/method after calling<br>     * &#123;@link Object<span class="hljs-comment">#wait() Object.wait&#125;.</span><br>     */<br>    BLOCKED,<br><br>    /**<br>     * Thread <span class="hljs-keyword">state</span> <span class="hljs-keyword">for</span> a waiting thread.<br>     * A thread is <span class="hljs-keyword">in</span> the waiting <span class="hljs-keyword">state</span> due <span class="hljs-keyword">to</span> calling one of the<br>     * following methods:<br>     * <span class="hljs-variable">&lt;ul&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link Object<span class="hljs-comment">#wait() Object.wait&#125; with no timeout&lt;/li&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#join() Thread.join&#125; with no timeout&lt;/li&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link LockSupport<span class="hljs-comment">#park() LockSupport.park&#125;&lt;/li&gt;</span><br>     * &lt;/ul&gt;<br>     *<br>     * <span class="hljs-variable">&lt;p&gt;</span>A thread <span class="hljs-keyword">in</span> the waiting <span class="hljs-keyword">state</span> is waiting <span class="hljs-keyword">for</span> another thread <span class="hljs-keyword">to</span><br>     * perform a particular action.<br>     *<br>     * For example, a thread that has called <span class="hljs-variable">&lt;tt&gt;</span>Object.wait()&lt;/tt&gt;<br>     * <span class="hljs-keyword">on</span> an object is waiting <span class="hljs-keyword">for</span> another thread <span class="hljs-keyword">to</span> call<br>     * <span class="hljs-variable">&lt;tt&gt;</span>Object.notify()&lt;/tt&gt; or <span class="hljs-variable">&lt;tt&gt;</span>Object.notifyAll()&lt;/tt&gt; <span class="hljs-keyword">on</span><br>     * that object. A thread that has called <span class="hljs-variable">&lt;tt&gt;</span>Thread.join()&lt;/tt&gt;<br>     * is waiting <span class="hljs-keyword">for</span> a specified thread <span class="hljs-keyword">to</span> terminate.<br>     */<br>    WAITING,<br><br>    /**<br>     * Thread <span class="hljs-keyword">state</span> <span class="hljs-keyword">for</span> a waiting thread with a specified waiting time.<br>     * A thread is <span class="hljs-keyword">in</span> the timed waiting <span class="hljs-keyword">state</span> due <span class="hljs-keyword">to</span> calling one of<br>     * the following methods with a specified positive waiting time:<br>     * <span class="hljs-variable">&lt;ul&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#sleep Thread.sleep&#125;&lt;/li&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link Object<span class="hljs-comment">#wait(long) Object.wait&#125; with timeout&lt;/li&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link <span class="hljs-comment">#join(long) Thread.join&#125; with timeout&lt;/li&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link LockSupport<span class="hljs-comment">#parkNanos LockSupport.parkNanos&#125;&lt;/li&gt;</span><br>     *   <span class="hljs-variable">&lt;li&gt;</span>&#123;@link LockSupport<span class="hljs-comment">#parkUntil LockSupport.parkUntil&#125;&lt;/li&gt;</span><br>     * &lt;/ul&gt;<br>     */<br>    TIMED_WAITING,<br><br>    /**<br>     * Thread <span class="hljs-keyword">state</span> <span class="hljs-keyword">for</span> a terminated thread.<br>     * The thread has completed execution.<br>     */<br>    TERMINATED;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åˆ†ææµç¨‹å›¾</p>
<p><img src="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/20240304154734.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<blockquote>
<p>é¢è¯•é¢˜ï¼š1.çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€</p>
</blockquote>
<p>æ–°å»º(NEW)ã€å¯è¿è¡Œ(RUNNABLE)ã€é˜»å¡(BLOCKED)ã€ç­‰å¾…(WAITING)ã€æ—¶é—´ç­‰å¾…(TIMED_WALTING)ã€ç»ˆæ­¢(TERMINATED)</p>
<blockquote>
<p>é¢è¯•é¢˜ï¼š2.çº¿ç¨‹çŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„</p>
</blockquote>
<ul>
<li>åˆ›å»ºçº¿ç¨‹å¯¹è±¡æ˜¯æ–°å»ºçŠ¶æ€</li>
<li>è°ƒç”¨äº†stat()æ–¹æ³•è½¬å˜ä¸º<strong>å¯æ‰§è¡ŒçŠ¶æ€</strong></li>
<li>çº¿ç¨‹è·å–åˆ°äº†CPUçš„æ‰§è¡Œæƒï¼Œæ‰§è¡Œç»“æŸæ˜¯<strong>ç»ˆæ­¢çŠ¶æ€</strong></li>
<li>åœ¨å¯æ‰§è¡ŒçŠ¶æ€çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰è·å– CPU çš„æ‰§è¡Œæƒï¼Œå¯èƒ½ä¼šåˆ‡æ¢å…¶ä»–çŠ¶æ€<ul>
<li>å¦‚æœæ²¡æœ‰è·å–é”(synchronized æˆ–Iock)è¿›å…¥<strong>é˜»å¡çŠ¶æ€</strong>ï¼Œè·å¾—é”å†åˆ‡æ¢ä¸ºå¯æ‰§è¡ŒçŠ¶æ€</li>
<li>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†wait()æ–¹æ³•è¿›å…¥<strong>ç­‰å¾…çŠ¶æ€</strong>ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨notify()å”¤é†’åå¯åˆ‡æ¢ä¸ºå¯æ‰§è¡ŒçŠ¶æ€</li>
<li>å¦‚æœçº¿ç¨‹è°ƒç”¨äº†sleep(50)æ–¹æ³•ï¼Œè¿›å…¥<strong>è®¡æ—¶ç­‰å¾…çŠ¶æ€</strong>ï¼Œåˆ°æ—¶é—´åå¯åˆ‡æ¢ä¸ºå¯æ‰§è¡ŒçŠ¶æ€</li>
</ul>
</li>
</ul>
<h3 id="4ã€åˆ›å»ºçº¿ç¨‹"><a href="#4ã€åˆ›å»ºçº¿ç¨‹" class="headerlink" title="4ã€åˆ›å»ºçº¿ç¨‹"></a>4ã€åˆ›å»ºçº¿ç¨‹</h3><h4 id="çº¿ç¨‹åˆ›å»º-ğŸš©"><a href="#çº¿ç¨‹åˆ›å»º-ğŸš©" class="headerlink" title="çº¿ç¨‹åˆ›å»º ğŸš©"></a>çº¿ç¨‹åˆ›å»º ğŸš©</h4><p>åœ¨Javaä¸­ï¼Œæœ‰ä¸‰ç§å¸¸è§çš„çº¿ç¨‹åˆ›å»ºæ–¹å¼ï¼šä½¿ç”¨Threadç±»ã€å®ç°Runnableæ¥å£å’Œå®ç°Callableæ¥å£ã€‚</p>
<ol>
<li>Threadç±»ï¼šThreadç±»æ˜¯ Java æä¾›çš„ä¸€ä¸ªçº¿ç¨‹ç±»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿Threadç±»æ¥åˆ›å»ºçº¿ç¨‹ã€‚<strong>é€šè¿‡é‡å†™Threadç±»çš„run()æ–¹æ³•æ¥å®šä¹‰çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘</strong>ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹</span><br><span class="hljs-type">MyThread</span> <span class="hljs-variable">myThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>myThread.start();<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>Runnable æ¥å£ï¼šRunnableæ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Runnableæ¥å£æ¥åˆ›å»ºçº¿ç¨‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRunnableæ¥å£å¹¶ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹ç±»ï¼Œ<strong>è€Œæ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œéœ€è¦é€šè¿‡Threadç±»æ¥åˆ›å»ºçº¿ç¨‹</strong>å¹¶æ‰§è¡Œä»»åŠ¡ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹</span><br><span class="hljs-type">MyRunnable</span> <span class="hljs-variable">myRunnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(myRunnable);<br>thread.start();<br></code></pre></td></tr></table></figure>


<ol start="3">
<li>Callableæ¥å£ï¼šCallableæ¥å£ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œä¸Runnableæ¥å£ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡å®ç°Callableæ¥å£æ¥åˆ›å»ºçº¿ç¨‹ã€‚ä¸åŒçš„æ˜¯ï¼Œ<strong>Callableæ¥å£çš„call()æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªç»“æœï¼Œå¹¶ä¸”å¯ä»¥æŠ›å‡ºå¼‚å¸¸</strong>ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCallable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;Integer&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">// çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>; <span class="hljs-comment">// è¿”å›ä¸€ä¸ªç»“æœ</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹</span><br><span class="hljs-type">MyCallable</span> <span class="hljs-variable">myCallable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>();<br><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();<br>Future&lt;Integer&gt; future = executorService.submit(myCallable);<br></code></pre></td></tr></table></figure>


<ul>
<li>ä½¿ç”¨Threadç±»åˆ›å»ºçº¿ç¨‹æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œä½†æ˜¯ç”±äºJavaä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œæ‰€ä»¥å¦‚æœå·²ç»æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œå°±ä¸èƒ½å†ç›´æ¥ä½¿ç”¨Threadç±»åˆ›å»ºçº¿ç¨‹ã€‚</li>
<li>å®ç°Runnableæ¥å£æ˜¯ä¸€ç§æ›´åŠ çµæ´»çš„æ–¹å¼ï¼Œå¯ä»¥é¿å…å•ç»§æ‰¿çš„é™åˆ¶ï¼Œè¿˜å¯ä»¥å…±äº«æ•°æ®ã€‚</li>
<li>Callableæ¥å£ä¸Runnableæ¥å£ç±»ä¼¼ï¼Œä½†å¯ä»¥è¿”å›ä¸€ä¸ªç»“æœï¼Œå¹¶ä¸”å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚å¯ä»¥é€šè¿‡ExecutorServiceçš„submit()æ–¹æ³•æ¥æ‰§è¡ŒCallableä»»åŠ¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡è¯¥å¯¹è±¡è·å–ä»»åŠ¡çš„ç»“æœã€‚</li>
</ul>
<hr>
<p>è¡¥å……ï¼š</p>
<p>Callable + FutureTask</p>
<p><code>Callable</code>æ¥å£ä¸<code>Runnable</code>æ¥å£ç±»ä¼¼ï¼Œä½†å®ƒå¯ä»¥è¿”å›æ‰§è¡Œç»“æœï¼Œå¹¶ä¸”å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚ä½¿ç”¨<code>Callable</code>æ—¶é€šå¸¸é…åˆ<code>FutureTask</code>æˆ–çº¿ç¨‹æ± ï¼ˆ<code>ExecutorService</code>ï¼‰æ¥ä½¿ç”¨ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.concurrent.Callable;<br><span class="hljs-keyword">import</span> java.util.concurrent.ExecutionException;<br><span class="hljs-keyword">import</span> java.util.concurrent.FutureTask;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CallableFutureTaskExample</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºCallableå¯¹è±¡</span><br>        Callable&lt;Integer&gt; callableTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callable</span>&lt;Integer&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>                System.out.println(<span class="hljs-string">&quot;å¼€å§‹è®¡ç®—...&quot;</span>);<br>                Thread.sleep(<span class="hljs-number">2000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—è¿‡ç¨‹</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>; <span class="hljs-comment">// è¿”å›è®¡ç®—ç»“æœ</span><br>            &#125;<br>        &#125;;<br><br>        <span class="hljs-comment">// å°†Callableä¸FutureTaskå…³è”</span><br>        FutureTask&lt;Integer&gt; futureTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(callableTask);<br><br>        <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹æ‰§è¡ŒFutureTask</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(futureTask);<br>        thread.start();<br><br>        <span class="hljs-comment">// æ‰§è¡Œå…¶ä»–ä»»åŠ¡...</span><br>        System.out.println(<span class="hljs-string">&quot;æ‰§è¡Œå…¶ä»–ä»»åŠ¡...&quot;</span>);<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// è·å–è®¡ç®—ç»“æœï¼Œå¦‚æœè®¡ç®—æœªå®Œæˆåˆ™é˜»å¡ç­‰å¾…</span><br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> futureTask.get();<br>            System.out.println(<span class="hljs-string">&quot;è®¡ç®—ç»“æœ: &quot;</span> + result);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>FutureTask</code>æ˜¯<code>Future</code>æ¥å£çš„ä¸€ä¸ªå®ç°ï¼Œå®ƒå°è£…äº†<code>Callable</code>ä»»åŠ¡çš„æ‰§è¡Œã€‚</p>
<p>é€šè¿‡å°†<code>Callable</code>å®ä¾‹ä¼ é€’ç»™<code>FutureTask</code>çš„æ„é€ å™¨,  ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œ<code>FutureTask</code>ã€‚</p>
<hr>
<p>ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­ä¼šä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</p>
<p>ä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œ<code>Runnable</code>ä»»åŠ¡çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;<br><span class="hljs-keyword">import</span> java.util.concurrent.Executors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolExample</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± </span><br>        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">2</span>);<br><br>        <span class="hljs-comment">// æäº¤Runnableä»»åŠ¡</span><br>        executor.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;Asynchronous task&quot;</span>);<br>            &#125;<br>        &#125;);<br><br>        <span class="hljs-comment">// å¦ä¸€ç§æäº¤Runnableä»»åŠ¡çš„æ–¹å¼ï¼Œä½¿ç”¨Java 8çš„Lambdaè¡¨è¾¾å¼</span><br>        executor.submit(() -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;Asynchronous task with lambda&quot;</span>);<br>        &#125;);<br><br>        <span class="hljs-comment">// å…³é—­çº¿ç¨‹æ± </span><br>        executor.shutdown();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå›ºå®šå¤§å°ä¸º2çš„çº¿ç¨‹æ± ï¼Œå¹¶æäº¤äº†ä¸¤ä¸ª<code>Runnable</code>ä»»åŠ¡ã€‚ä½¿ç”¨çº¿ç¨‹æ± çš„å¥½å¤„æ˜¯å¯ä»¥é‡ç”¨çº¿ç¨‹ï¼Œå‡å°‘çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€ï¼Œä»¥åŠå¯ä»¥æ§åˆ¶å¹¶å‘çº¿ç¨‹çš„æ•°é‡ã€‚</p>
<hr>
<p>å…±æœ‰å››ç§æ–¹å¼å¯ä»¥åˆ›å»ºçº¿ç¨‹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>ç»§æ‰¿Threadç±»</li>
<li>å®ç° runnable æ¥å£</li>
<li>å®ç° Callable æ¥å£</li>
<li>çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹ï¼ˆé¡¹ç›®ä¸­ä½¿ç”¨æ–¹å¼ï¼‰</li>
</ul>
<blockquote>
<p>é¢è¯•é¢˜ï¼š runnableå’Œcallableæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
</blockquote>
<p>å‚è€ƒå›ç­”ï¼š</p>
<ul>
<li>1.Runnableæ¥å£ run æ–¹æ³•æ²¡æœ‰è¿”å›å€¼</li>
<li>2.Callableæ¥å£ call æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œæ˜¯ä¸ªæ³›å‹ï¼Œå’ŒFutureã€FutureTaskié…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœ</li>
<li>3.Callableæ¥å£çš„ call() æ–¹æ³•å…è®¸æŠ›å‡ºå¼‚å¸¸ï¼›è€ŒRunnableæ¥å£çš„runOæ–¹æ³•çš„å¼‚å¸¸åªèƒ½åœ¨å†…éƒ¨æ¶ˆåŒ–ï¼Œä¸èƒ½ç»§ç»­ä¸ŠæŠ›</li>
</ul>
<blockquote>
<p>é¢è¯•é¢˜ï¼šçº¿ç¨‹çš„run() å’Œstart() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
</blockquote>
<ul>
<li>start():ç”¨æ¥å¯åŠ¨çº¿ç¨‹ï¼Œé€šè¿‡è¯¥çº¿ç¨‹è°ƒç”¨runæ–¹æ³•æ‰§è¡Œrunæ–¹æ³•ä¸­æ‰€å®šä¹‰çš„é€»è¾‘ä»£ç ã€‚startæ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚</li>
<li>run():å°è£…äº†è¦è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œå¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ã€‚</li>
</ul>
<h4 id="å†™æ³•ç®€åŒ–"><a href="#å†™æ³•ç®€åŒ–" class="headerlink" title="å†™æ³•ç®€åŒ–"></a>å†™æ³•ç®€åŒ–</h4><blockquote>
<p>å†™æ³•ç®€åŒ–ï¼ˆJava 8)</p>
</blockquote>
<ul>
<li><strong>æ–¹å¼ä¸€ï¼š</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>()&#123; <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123; <br>        System.out.println(<span class="hljs-string">&quot;thread run ...&quot;</span>);<br>    &#125;<br>&#125;;<br><br>thread.start();<br></code></pre></td></tr></table></figure>

<p>ç®€åŒ–åï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; System.out.println(<span class="hljs-string">&quot;thread run ...&quot;</span>));<br><br>thread.start();<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>æ–¹å¼äºŒï¼š</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123; <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123; <br>        System.out.println(<span class="hljs-string">&quot;runnable run ...&quot;</span>);<br>    &#125;<br>&#125;);<br><br>thread.start();<br></code></pre></td></tr></table></figure>

<p>ç®€åŒ–åï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; System.out.println(<span class="hljs-string">&quot;runnable run ...&quot;</span>));<br><br>thread.start();<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>æ–¹å¼ä¸‰ï¼š</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">Callable&lt;Integer&gt; callable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callable</span>() &#123; <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123; <br>        System.out.println(<span class="hljs-string">&quot;callable run ...&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">521</span>;<br>    &#125;<br>&#125;;<br><span class="hljs-type">FutureTask</span> <span class="hljs-variable">futureTask</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>(callable);<br><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(futureTask);<br>thread.start();<br></code></pre></td></tr></table></figure>

<p>ç®€åŒ–åï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>(() -&gt; &#123; <br>    System.out.println(<span class="hljs-string">&quot;callable run ...&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">521</span>;<br>&#125;));<br><br>thread.start();<br></code></pre></td></tr></table></figure>


<hr>
<h4 id="å¸¸è§é¢è¯•é¢˜"><a href="#å¸¸è§é¢è¯•é¢˜" class="headerlink" title="å¸¸è§é¢è¯•é¢˜"></a>å¸¸è§é¢è¯•é¢˜</h4><h5 id="é¡ºåºæ‰§è¡Œ"><a href="#é¡ºåºæ‰§è¡Œ" class="headerlink" title="é¡ºåºæ‰§è¡Œ"></a>é¡ºåºæ‰§è¡Œ</h5><p>å¸¸è§çš„ä¸€é“é¢è¯•é¢˜ï¼šæ–°å»ºT1ã€T2ã€T3ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿ</p>
<p>è¦ä¿è¯ä¸‰ä¸ªçº¿ç¨‹T1ã€T2ã€T3æŒ‰é¡ºåºæ‰§è¡Œï¼Œå³å…ˆæ‰§è¡ŒT1ï¼ŒT1æ‰§è¡Œå®Œæ¯•åæ‰§è¡ŒT2ï¼ŒT2æ‰§è¡Œå®Œæ¯•åæ‰§è¡ŒT3ï¼Œå¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•æ¥å®ç°ã€‚è¿™é‡Œæä¾›ä¸‰ç§å¸¸è§çš„æ–¹æ³•ï¼š</p>
<p>æ–¹æ³•1ï¼šä½¿ç”¨<code>join()</code>æ–¹æ³•</p>
<p><code>join()</code>æ–¹æ³•å¯ä»¥ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å®Œæˆåå†ç»§ç»­æ‰§è¡Œã€‚</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs livescript">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadOrder</span> &#123;<br>    public <span class="hljs-keyword">static</span> <span class="hljs-literal">void</span> main(<span class="hljs-built_in">String</span>[] args) &#123;<br>        Thread t1 = <span class="hljs-keyword">new</span> Thread<span class="hljs-function"><span class="hljs-params">(() -&gt; System.out.println(<span class="hljs-string">&quot;T1 is running&quot;</span>))</span>;</span><br><span class="hljs-function">        <span class="hljs-title">Thread</span> <span class="hljs-title">t2</span> = <span class="hljs-title">new</span> <span class="hljs-title">Thread</span><span class="hljs-params">(() -&gt; System.out.println(<span class="hljs-string">&quot;T2 is running&quot;</span>))</span>;</span><br><span class="hljs-function">        <span class="hljs-title">Thread</span> <span class="hljs-title">t3</span> = <span class="hljs-title">new</span> <span class="hljs-title">Thread</span><span class="hljs-params">(() -&gt; System.out.println(<span class="hljs-string">&quot;T3 is running&quot;</span>))</span>;</span><br><span class="hljs-function">        </span><br><span class="hljs-function">        <span class="hljs-title">try</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">t1</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">            <span class="hljs-title">t1</span>.<span class="hljs-title">join</span><span class="hljs-params">()</span>; // ç­‰å¾…<span class="hljs-title">t1</span>æ‰§è¡Œå®Œæ¯•</span><br><span class="hljs-function">            </span><br><span class="hljs-function">            <span class="hljs-title">t2</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">            <span class="hljs-title">t2</span>.<span class="hljs-title">join</span><span class="hljs-params">()</span>; // ç­‰å¾…<span class="hljs-title">t2</span>æ‰§è¡Œå®Œæ¯•</span><br><span class="hljs-function">            </span><br><span class="hljs-function">            <span class="hljs-title">t3</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">            <span class="hljs-title">t3</span>.<span class="hljs-title">join</span><span class="hljs-params">()</span>; // ç­‰å¾…<span class="hljs-title">t3</span>æ‰§è¡Œå®Œæ¯•</span><br><span class="hljs-function">        &#125; <span class="hljs-title">catch</span> <span class="hljs-params">(InterruptedException e)</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">e</span>.<span class="hljs-title">printStackTrace</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">        &#125;</span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure>

<p>æ–¹æ³•2ï¼šä½¿ç”¨<code>wait()</code>å’Œ<code>notify()/notifyAll()</code>æ–¹æ³•</p>
<p>é€šè¿‡å¯¹è±¡ç›‘è§†å™¨çš„<code>wait()</code>å’Œ<code>notify()</code>æ–¹æ³•æ¥æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºã€‚è¿™ç§æ–¹æ³•ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦ç¡®ä¿<code>wait()</code>å’Œ<code>notify()</code>è°ƒç”¨åœ¨åŒæ­¥å—ä¸­ã€‚</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs livescript">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadOrder</span> &#123;<br>    public <span class="hljs-keyword">static</span> <span class="hljs-literal">void</span> main(<span class="hljs-built_in">String</span>[] args) &#123;<br>        final <span class="hljs-built_in">Object</span> lock = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();<br>        Thread t1 = <span class="hljs-keyword">new</span> Thread<span class="hljs-function"><span class="hljs-params">(() -&gt; &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">            synchronized (lock) &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">                System.out.println(<span class="hljs-string">&quot;T1 is running&quot;</span>);</span></span><br><span class="hljs-params"><span class="hljs-function">                lock.notify(); <span class="hljs-regexp">// å”¤é†’ç­‰å¾…lockå¯¹è±¡çš„ä¸€ä¸ªçº¿ç¨‹</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">            &#125;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">        &#125;);</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">        </span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">        Thread t2 = new Thread(() -&gt; &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">            synchronized (lock) &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                try &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                    lock.wait(); //</span> ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…ç›´åˆ°lockå¯¹è±¡è¢«å”¤é†’</span></span><br><span class="hljs-params"><span class="hljs-function">                    System.out.println(<span class="hljs-string">&quot;T2 is running&quot;</span>);</span></span><br><span class="hljs-params"><span class="hljs-function">                    lock.notify(); <span class="hljs-regexp">// å”¤é†’ç­‰å¾…lockå¯¹è±¡çš„ä¸€ä¸ªçº¿ç¨‹</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                &#125; catch (InterruptedException e) &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                    e.printStackTrace();</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                &#125;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">            &#125;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">        &#125;);</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">        </span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">        Thread t3 = new Thread(() -&gt; &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">            synchronized (lock) &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                try &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                    lock.wait(); //</span> ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…ç›´åˆ°lockå¯¹è±¡è¢«å”¤é†’</span></span><br><span class="hljs-params"><span class="hljs-function">                    System.out.println(<span class="hljs-string">&quot;T3 is running&quot;</span>);</span></span><br><span class="hljs-params"><span class="hljs-function">                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">                    e.printStackTrace();</span></span><br><span class="hljs-params"><span class="hljs-function">                &#125;</span></span><br><span class="hljs-params"><span class="hljs-function">            &#125;</span></span><br><span class="hljs-params"><span class="hljs-function">        &#125;)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-title">try</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">t2</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">            <span class="hljs-title">t3</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">            <span class="hljs-title">Thread</span>.<span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-number">100</span>)</span>; // ç¡®ä¿<span class="hljs-title">t2</span>å’Œ<span class="hljs-title">t3</span>å¯åŠ¨å¹¶è¿›å…¥<span class="hljs-title">wait</span>çŠ¶æ€</span><br><span class="hljs-function">            <span class="hljs-title">t1</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">        &#125; <span class="hljs-title">catch</span> <span class="hljs-params">(InterruptedException e)</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">e</span>.<span class="hljs-title">printStackTrace</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">        &#125;</span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure>

<p>æ–¹æ³•3ï¼šä½¿ç”¨<code>CountDownLatch</code></p>
<p><code>CountDownLatch</code>æ˜¯ä¸€ä¸ªåŒæ­¥è¾…åŠ©ç±»ï¼Œç”¨äºå»¶è¿Ÿçº¿ç¨‹çš„è¿›åº¦ç›´åˆ°å…¶è¾¾åˆ°ç»ˆæ­¢çŠ¶æ€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadOrder</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1</span>);<br>        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1</span>);<br>        <br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;T1 is running&quot;</span>);<br>            latch1.countDown(); <span class="hljs-comment">// å‡å°‘è®¡æ•°</span><br>        &#125;);<br>        <br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                latch1.await(); <span class="hljs-comment">// ç­‰å¾…latch1è®¡æ•°åˆ°è¾¾0</span><br>                System.out.println(<span class="hljs-string">&quot;T2 is running&quot;</span>);<br>                latch2.countDown(); <span class="hljs-comment">// å‡å°‘è®¡æ•°</span><br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;);<br>        <br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                latch2.await(); <span class="hljs-comment">// ç­‰å¾…latch2è®¡æ•°åˆ°è¾¾0</span><br>                System.out.println(<span class="hljs-string">&quot;T3 is running&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;);<br>        <br>        t1.start();<br>        t2.start();<br>        t3.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™ä¸‰ç§æ–¹æ³•å„æœ‰ç‰¹ç‚¹ï¼Œå¯ä»¥æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©æœ€é€‚åˆçš„ä¸€ç§æ¥ä¿è¯çº¿ç¨‹æŒ‰é¡ºåºæ‰§è¡Œã€‚</p>
<hr>
<blockquote>
<p>é¢è¯•é¢˜ï¼šæ–°å»ºT1ã€T2ã€T3ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿ</p>
</blockquote>
<p>å¯ä»¥ä½¿ç”¨çº¿ç¨‹ä¸­çš„ join æ–¹æ³•è§£å†³</p>
<p><img src="https://obsidian-picture.oss-cn-shenzhen.aliyuncs.com/luoblog/20240304162424.png" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<h5 id="åœæ­¢çº¿ç¨‹"><a href="#åœæ­¢çº¿ç¨‹" class="headerlink" title="åœæ­¢çº¿ç¨‹"></a>åœæ­¢çº¿ç¨‹</h5><blockquote>
<p>å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Ÿ</p>
</blockquote>
<p>æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥åœæ­¢çº¿ç¨‹</p>
<ul>
<li>ä½¿ç”¨é€€å‡ºæ ‡å¿—ï¼Œä½¿çº¿ç¨‹æ­£å¸¸é€€å‡ºï¼Œä¹Ÿå°±æ˜¯å½“ run æ–¹æ³•å®Œæˆåçº¿ç¨‹ç»ˆæ­¢</li>
<li>ä½¿ç”¨stopæ–¹æ³•å¼ºè¡Œç»ˆæ­¢ï¼ˆä¸æ¨èï¼Œæ–¹æ³•å·²ä½œåºŸï¼‰</li>
<li>ä½¿ç”¨interruptæ–¹æ³•ä¸­æ–­çº¿ç¨‹<ul>
<li>æ‰“æ–­é˜»å¡çš„çº¿ç¨‹(sleep,wait,join) çš„çº¿ç¨‹ï¼Œçº¿ç¨‹ä¼šæŠ›å‡º InterruptedException å¼‚å¸¸</li>
<li>æ‰“æ–­æ­£å¸¸çš„çº¿ç¨‹ï¼Œå¯ä»¥æ ¹æ®æ‰“æ–­çŠ¶æ€æ¥æ ‡è®°æ˜¯å¦é€€å‡ºçº¿ç¨‹</li>
</ul>
</li>
</ul>
<h3 id="5ã€çº¿ç¨‹åŸºæœ¬æ–¹æ³•"><a href="#5ã€çº¿ç¨‹åŸºæœ¬æ–¹æ³•" class="headerlink" title="5ã€çº¿ç¨‹åŸºæœ¬æ–¹æ³•"></a>5ã€çº¿ç¨‹åŸºæœ¬æ–¹æ³•</h3><blockquote>
<p>æ³¨æ„ï¼šæ ‡é»„è‰²çš„æ–¹æ³•ä»£è¡¨æ˜¯ <code>static</code>â€‹ æ–¹æ³•ï¼Œå¯ç›´æ¥ç±»åè°ƒç”¨ï¼Œæ— éœ€åˆ›å»ºå¯¹è±¡ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>æ³¨æ„äº‹é¡¹</th>
</tr>
</thead>
<tbody><tr>
<td>â€‹<code>start()</code>â€‹</td>
<td>å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œ<br />åœ¨æ–°çš„çº¿ç¨‹è¿è¡Œ run æ–¹æ³•</td>
<td>start æ–¹æ³•åªæ˜¯è®©çº¿ç¨‹è¿›å…¥å°±ç»ªï¼Œé‡Œé¢ä»£ç ä¸ä¸€å®šç«‹åˆ»<br />è¿è¡Œï¼ˆCPU çš„æ—¶é—´ç‰‡è¿˜æ²¡åˆ†ç»™å®ƒï¼‰ã€‚æ¯ä¸ªçº¿ç¨‹å¯¹è±¡çš„<br />startæ–¹æ³•åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœè°ƒç”¨äº†å¤šæ¬¡ä¼šå‡ºç°<br />IllegalThreadStateException</td>
</tr>
<tr>
<td>â€‹<code>run()</code>â€‹</td>
<td>æ–°çº¿ç¨‹å¯åŠ¨åä¼šè°ƒç”¨çš„æ–¹æ³•</td>
<td>å¦‚æœåœ¨æ„é€  Thread å¯¹è±¡æ—¶ä¼ é€’äº† Runnable å‚æ•°ï¼Œåˆ™<br />çº¿ç¨‹å¯åŠ¨åä¼šè°ƒç”¨ Runnable ä¸­çš„ run æ–¹æ³•ï¼Œå¦åˆ™é»˜<br />è®¤ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚ä½†å¯ä»¥åˆ›å»º Thread çš„å­ç±»å¯¹è±¡ï¼Œ<br />æ¥è¦†ç›–é»˜è®¤è¡Œä¸º</td>
</tr>
<tr>
<td>â€‹<code>join()</code>â€‹</td>
<td>ç­‰å¾…çº¿ç¨‹è¿è¡Œç»“æŸ</td>
<td></td>
</tr>
<tr>
<td>â€‹<code>join(long n)</code>â€‹</td>
<td>ç­‰å¾…çº¿ç¨‹è¿è¡Œç»“æŸï¼Œ<br />æœ€å¤šç­‰å¾… n æ¯«ç§’</td>
<td></td>
</tr>
<tr>
<td>â€‹<code>getId()</code>â€‹</td>
<td>è·å–çº¿ç¨‹é•¿æ•´å‹çš„ id</td>
<td>id å”¯ä¸€</td>
</tr>
<tr>
<td>â€‹<code>getName()</code>â€‹</td>
<td>è·å–çº¿ç¨‹å</td>
<td></td>
</tr>
<tr>
<td>â€‹<code>setName(String name)</code>â€‹</td>
<td>ä¿®æ”¹çº¿ç¨‹å</td>
<td></td>
</tr>
<tr>
<td>â€‹<code>getPriority()</code>â€‹</td>
<td>è·å–çº¿ç¨‹ä¼˜å…ˆçº§</td>
<td></td>
</tr>
<tr>
<td>â€‹<code>setPriority(int priority)</code>â€‹</td>
<td>ä¿®æ”¹çº¿ç¨‹ä¼˜å…ˆçº§</td>
<td>Java ä¸­è§„å®šçº¿ç¨‹ä¼˜å…ˆçº§æ˜¯1~10 çš„æ•´æ•°ï¼Œè¾ƒå¤§çš„ä¼˜å…ˆçº§<br />èƒ½æé«˜è¯¥çº¿ç¨‹è¢« CPU è°ƒåº¦çš„æœºç‡</td>
</tr>
<tr>
<td>â€‹<code>getState()</code>â€‹</td>
<td>è·å–çº¿ç¨‹çŠ¶æ€</td>
<td>Java ä¸­çº¿ç¨‹çŠ¶æ€æ˜¯ç”¨ 6 ä¸ª enum è¡¨ç¤ºï¼Œåˆ†åˆ«ä¸ºï¼š<br />NEW, RUNNABLE, BLOCKED, WAITING,<br />TIMED_WAITING, TERMINATED</td>
</tr>
<tr>
<td>â€‹<code>interrupt()</code>â€‹</td>
<td>æ‰“æ–­çº¿ç¨‹</td>
<td>å¦‚æœè¢«æ‰“æ–­çº¿ç¨‹æ­£åœ¨ sleepï¼Œwaitï¼Œjoin ä¼šå¯¼è‡´è¢«<br />æ‰“æ–­çš„çº¿ç¨‹æŠ›å‡º InterruptedExceptionï¼Œå¹¶æ¸…é™¤<br />æ‰“æ–­æ ‡è®°ï¼›å¦‚æœæ‰“æ–­æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œåˆ™ä¼šè®¾ç½®<br />æ‰“æ–­æ ‡è®°ï¼›park çš„çº¿ç¨‹è¢«æ‰“æ–­ï¼Œä¹Ÿä¼šè®¾ç½®æ‰“æ–­æ ‡è®°</td>
</tr>
<tr>
<td><font color=Coral>interrupted()</font></td>
<td>åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦è¢«æ‰“æ–­</td>
<td>ä¼šæ¸…é™¤æ‰“æ–­æ ‡è®°</td>
</tr>
<tr>
<td>â€‹<code>isInterrupted()</code>â€‹</td>
<td>åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦è¢«æ‰“æ–­</td>
<td>ä¸ä¼šæ¸…é™¤æ‰“æ–­æ ‡è®°</td>
</tr>
<tr>
<td>â€‹<code>isAlive()</code>â€‹</td>
<td>åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦å­˜æ´»</td>
<td></td>
</tr>
<tr>
<td>â€‹<code>isDaemon()</code>â€‹</td>
<td>åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹</td>
<td></td>
</tr>
<tr>
<td>â€‹<code>setDaemon(boolean on)</code>â€‹</td>
<td>è®¾ç½®å½“å‰çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹</td>
<td></td>
</tr>
<tr>
<td><font color=Coral>currentThread()</font></td>
<td>è·å–å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹</td>
<td></td>
</tr>
<tr>
<td><font color=Coral>sleep(long n)</font></td>
<td>è®©å½“å‰æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ næ¯«ç§’ï¼Œ<br />ä¼‘çœ æ—¶è®©å‡º CPU çš„æ—¶é—´ç‰‡<br />ç»™å…¶å®ƒçº¿ç¨‹</td>
<td></td>
</tr>
<tr>
<td><font color=Coral>yield()</font></td>
<td>æç¤ºçº¿ç¨‹è°ƒåº¦å™¨è®©å‡ºå½“å‰çº¿ç¨‹<br />å¯¹ CPU çš„ä½¿ç”¨</td>
<td>ä¸»è¦æ˜¯ä¸ºäº†æµ‹è¯•å’Œè°ƒè¯•ï¼Œå®ƒçš„å…·ä½“çš„å®ç°ä¾èµ–äº<br />æ“ä½œç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦å™¨</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="å¸¸è§é¢è¯•é¢˜-1"><a href="#å¸¸è§é¢è¯•é¢˜-1" class="headerlink" title="å¸¸è§é¢è¯•é¢˜"></a>å¸¸è§é¢è¯•é¢˜</h4><blockquote>
<p>é¢è¯•é¢˜ï¼šnotify()å’ŒnotifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
</blockquote>
<ul>
<li>notifyAll:å”¤é†’æ‰€æœ‰waitçš„çº¿ç¨‹</li>
<li>notify:åªéšæœºå”¤é†’ä¸€ä¸ªwaitçº¿ç¨‹</li>
</ul>
<h5 id="wait-å’Œ-sleep"><a href="#wait-å’Œ-sleep" class="headerlink" title="wait å’Œ sleep"></a>wait å’Œ sleep</h5><blockquote>
<p>é¢è¯•é¢˜ï¼šåœ¨javaä¸­waitå’Œsleepæ–¹æ³•çš„ä¸åŒï¼Ÿ</p>
</blockquote>
<ul>
<li>å…±åŒç‚¹<ul>
<li>wait(),wait(long)å’Œsleep(long)çš„æ•ˆæœéƒ½æ˜¯è®©å½“å‰çº¿ç¨‹æš‚æ—¶æ”¾å¼ƒCPUçš„ä½¿ç”¨æƒï¼Œè¿›å…¥é˜»å¡çŠ¶æ€</li>
</ul>
</li>
<li>ä¸åŒç‚¹<ul>
<li>1.æ–¹æ³•å½’å±ä¸åŒ<ul>
<li>sleep(long)æ˜¯Threadçš„é™æ€æ–¹æ³•</li>
<li>è€Œwait(),wait(long)éƒ½æ˜¯Objectçš„æˆå‘˜æ–¹æ³•ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰</li>
</ul>
</li>
<li>2ã€é†’æ¥æ—¶æœºä¸åŒ<ul>
<li>æ‰§è¡Œsleep(long)å’Œwait(long)çš„çº¿ç¨‹éƒ½ä¼šåœ¨ç­‰å¾…ç›¸åº”æ¯«ç§’åé†’æ¥</li>
<li>wait(long)å’Œwait0è¿˜å¯ä»¥è¢«notifyå”¤é†’ï¼Œwait()å¦‚æœä¸å”¤é†’å°±ä¸€ç›´ç­‰ä¸‹å»</li>
<li>å®ƒä»¬éƒ½å¯ä»¥è¢«æ‰“æ–­å”¤é†’</li>
</ul>
</li>
<li>3.é”ç‰¹æ€§ä¸åŒï¼ˆé‡ç‚¹ï¼‰<ul>
<li>waitæ–¹æ³•çš„è°ƒç”¨å¿…é¡»å…ˆè·å–waitå¯¹è±¡çš„é”ï¼Œè€Œsleepåˆ™æ— æ­¤é™åˆ¶</li>
<li>waitæ–¹æ³•æ‰§è¡Œåä¼šé‡Šæ”¾å¯¹è±¡é”ï¼Œå…è®¸å…¶å®ƒçº¿ç¨‹è·å¾—è¯¥å¯¹è±¡é”ï¼ˆæˆ‘æ”¾å¼ƒcpu,ä½†ä½ ä»¬è¿˜å¯ä»¥ç”¨ï¼‰</li>
<li>è€Œsleepå¦‚æœåœ¨synchronizedä»£ç å—ä¸­æ‰§è¡Œï¼Œå¹¶ä¸ä¼šé‡Šæ”¾å¯¹è±¡é”ï¼ˆæˆ‘æ”¾å¼ƒcpu,ä½ ä»¬ä¹Ÿç”¨ä¸äº†ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WaitSleepExample</span> &#123;<br>    private <span class="hljs-keyword">static</span> final <span class="hljs-built_in">Object</span> LOCK = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();<br><br>    public <span class="hljs-keyword">static</span> <span class="hljs-literal">void</span> main(<span class="hljs-built_in">String</span>[] args) &#123;<br>        <span class="hljs-regexp">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç­‰å¾…æ“ä½œ</span><br><span class="hljs-regexp">        Thread waitThread = new Thread(() -&gt; &#123;</span><br><span class="hljs-regexp">            synchronized (LOCK) &#123; //</span> å¿…é¡»åœ¨åŒæ­¥å—å†…è°ƒç”¨waitï¼Œè¿™è¡¨ç¤ºå¿…é¡»æŒæœ‰å¯¹è±¡çš„é”<br>                <span class="hljs-keyword">try</span> &#123;<br>                    System.out.println(<span class="hljs-string">&quot;Wait Thread: Holding lock, now wait&quot;</span>);<br>                    LOCK.wait(); <span class="hljs-regexp">// è°ƒç”¨waitæ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹ä¼šé‡Šæ”¾LOCKå¯¹è±¡ä¸Šçš„é”ï¼Œå¹¶è¿›å…¥ç­‰å¾…çŠ¶æ€</span><br><span class="hljs-regexp">                    System.out.println(&quot;Wait Thread: Exited wait&quot;);</span><br><span class="hljs-regexp">                &#125; catch (InterruptedException e) &#123;</span><br><span class="hljs-regexp">                    e.printStackTrace();</span><br><span class="hljs-regexp">                &#125;</span><br><span class="hljs-regexp">            &#125;</span><br><span class="hljs-regexp">        &#125;);</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">        //</span> åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç¡çœ æ“ä½œ<br>        Thread sleepThread = <span class="hljs-keyword">new</span> Thread<span class="hljs-function"><span class="hljs-params">(() -&gt; &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">            synchronized (LOCK) &#123; <span class="hljs-regexp">// è¿›å…¥åŒæ­¥å—ï¼ŒæŒæœ‰LOCKå¯¹è±¡çš„é”</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                try &#123;</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                    System.out.println(&quot;Sleep Thread: Holding lock, now sleep&quot;);</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                    Thread.sleep(1000); //</span> è°ƒç”¨sleepæ–¹æ³•ï¼Œä½†ä¸ä¼šé‡Šæ”¾LOCKå¯¹è±¡ä¸Šçš„é”</span></span><br><span class="hljs-params"><span class="hljs-function">                    System.out.println(<span class="hljs-string">&quot;Sleep Thread: Exited sleep&quot;</span>);</span></span><br><span class="hljs-params"><span class="hljs-function">                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">                    e.printStackTrace();</span></span><br><span class="hljs-params"><span class="hljs-function">                &#125;</span></span><br><span class="hljs-params"><span class="hljs-function">            &#125;</span></span><br><span class="hljs-params"><span class="hljs-function">        &#125;)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        // åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œé€šçŸ¥æ“ä½œ</span><br><span class="hljs-function">        <span class="hljs-title">Thread</span> <span class="hljs-title">notifyThread</span> = <span class="hljs-title">new</span> <span class="hljs-title">Thread</span><span class="hljs-params">(() -&gt; &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">            synchronized (LOCK) &#123; <span class="hljs-regexp">// è¿›å…¥åŒæ­¥å—ï¼ŒæŒæœ‰LOCKå¯¹è±¡çš„é”</span></span></span><br><span class="hljs-regexp"><span class="hljs-params"><span class="hljs-function">                //</span> å‘é€é€šçŸ¥ï¼Œå‘Šè¯‰ç­‰å¾…åœ¨LOCKå¯¹è±¡ä¸Šçš„çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œ</span></span><br><span class="hljs-params"><span class="hljs-function">                LOCK.notifyAll();</span></span><br><span class="hljs-params"><span class="hljs-function">                System.out.println(<span class="hljs-string">&quot;Notify Thread: Sent notification&quot;</span>);</span></span><br><span class="hljs-params"><span class="hljs-function">            &#125;</span></span><br><span class="hljs-params"><span class="hljs-function">        &#125;)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-title">waitThread</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>; // å¯åŠ¨ç­‰å¾…çº¿ç¨‹</span><br><span class="hljs-function">        <span class="hljs-title">try</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">Thread</span>.<span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-number">500</span>)</span>; // ç¡®ä¿<span class="hljs-title">waitThread</span>å…ˆæ‰§è¡Œ</span><br><span class="hljs-function">        &#125; <span class="hljs-title">catch</span> <span class="hljs-params">(InterruptedException e)</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">e</span>.<span class="hljs-title">printStackTrace</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">        &#125;</span><br><span class="hljs-function">        <span class="hljs-title">sleepThread</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>; // å¯åŠ¨ç¡çœ çº¿ç¨‹</span><br><span class="hljs-function">        <span class="hljs-title">try</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">Thread</span>.<span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-number">500</span>)</span>; // ç¡®ä¿<span class="hljs-title">sleepThread</span>æœ‰æœºä¼šæ‰§è¡Œ</span><br><span class="hljs-function">        &#125; <span class="hljs-title">catch</span> <span class="hljs-params">(InterruptedException e)</span> &#123;</span><br><span class="hljs-function">            <span class="hljs-title">e</span>.<span class="hljs-title">printStackTrace</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">        &#125;</span><br><span class="hljs-function">        <span class="hljs-title">notifyThread</span>.<span class="hljs-title">start</span><span class="hljs-params">()</span>; // å¯åŠ¨é€šçŸ¥çº¿ç¨‹</span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>å…³äºé”çš„ä¸åŒå¤„ç†</strong>ï¼š<ul>
<li><strong><code>wait()</code>æ–¹æ³•</strong>ï¼šè°ƒç”¨<code>wait()</code>æ—¶ï¼Œçº¿ç¨‹å¿…é¡»æŒæœ‰å¯¹è±¡çš„é”ï¼ˆè¿™æ˜¯é€šè¿‡åœ¨<code>synchronized</code>å—å†…è°ƒç”¨<code>wait()</code>æ¥ä¿è¯çš„ï¼‰ã€‚ä¸€æ—¦<code>wait()</code>è¢«è°ƒç”¨ï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾è¿™ä¸ªå¯¹è±¡ä¸Šçš„é”ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹è·å–è¿™ä¸ªé”ã€‚å½“å…¶ä»–çº¿ç¨‹åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨<code>notify()</code>æˆ–<code>notifyAll()</code>æ—¶ï¼Œç­‰å¾…çš„çº¿ç¨‹æ‰æœ‰æœºä¼šé‡æ–°è·å–é”å¹¶ç»§ç»­æ‰§è¡Œã€‚</li>
<li><strong><code>sleep()</code>æ–¹æ³•</strong>ï¼šä¸<code>wait()</code>ä¸åŒï¼Œè°ƒç”¨<code>sleep()</code>æ—¶çº¿ç¨‹ä¸ä¼šé‡Šæ”¾ä»»ä½•æŒæœ‰çš„é”ã€‚å³ä½¿æ˜¯åœ¨<code>synchronized</code>å—å†…è°ƒç”¨<code>sleep()</code>ï¼Œå½“å‰çº¿ç¨‹ä»ç„¶ä¼šä¿æŒå¯¹é”çš„æŒæœ‰ï¼Œç›´åˆ°<code>sleep()</code>å®Œæˆã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨æŒæœ‰æŸä¸ªå¯¹è±¡é”çš„åŒæ—¶è°ƒç”¨äº†<code>sleep()</code>ï¼Œå…¶ä»–æƒ³è¦è®¿é—®è¿™ä¸ªåŒæ­¥å—çš„çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°ç¡çœ çº¿ç¨‹é†’æ¥å¹¶é€€å‡ºåŒæ­¥å—ï¼Œé‡Šæ”¾é”ã€‚</li>
</ul>
</li>
</ul>
<p>â†’  ä½¿ç”¨ sleep çš„æ—¶å€™åŒæ­¥å—ä»£ç çº¿ç¨‹ä¼šè¢«é˜»å¡ã€‚</p>
<h3 id="6ã€Synchronized-å’Œ-Lock-çš„ä½¿ç”¨"><a href="#6ã€Synchronized-å’Œ-Lock-çš„ä½¿ç”¨" class="headerlink" title="6ã€Synchronized å’Œ Lock çš„ä½¿ç”¨"></a>6ã€Synchronized å’Œ Lock çš„ä½¿ç”¨</h3><p>å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œé”æ˜¯ç»å¸¸éœ€è¦ç”¨åˆ°çš„ã€‚è¿™é‡Œè®²è¿°ä¸€ä¸‹ Synchronized å’Œ Lock çš„ä½¿ç”¨ã€‚</p>
<p>Synchronized æ˜¯ Java å¹¶å‘ç¼–ç¨‹ ä¸­å¾ˆé‡è¦çš„å…³é”®å­—ï¼Œå¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„æ˜¯ volatileã€‚</p>
<p>Syncronized çš„ç›®çš„æ˜¯ä¸€æ¬¡<strong>åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ç”±ä»–ä¿®é¥°çš„ä»£ç æ®µ</strong>ï¼Œä»è€Œå…è®¸ä»–ä»¬è¿›è¡Œè‡ªæˆ‘ä¿æŠ¤ã€‚</p>
<p>Lock æ˜¯ Javaå¹¶å‘ç¼–ç¨‹ä¸­<strong>å¾ˆé‡è¦çš„ä¸€ä¸ªæ¥å£</strong>ï¼Œå®ƒè¦æ¯” Synchronized å…³é”®å­—æ›´èƒ½ç›´è¯‘â€é”â€çš„æ¦‚å¿µï¼ŒLockéœ€è¦<strong>æ‰‹åŠ¨åŠ é”å’Œæ‰‹åŠ¨è§£é”</strong>ï¼Œä¸€èˆ¬é€šè¿‡ lock.lock() æ–¹æ³•æ¥è¿›è¡ŒåŠ é”ï¼Œ é€šè¿‡ lock.unlock() æ–¹æ³•è¿›è¡Œè§£é”ã€‚ä¸ Lock å…³è”å¯†åˆ‡çš„é”æœ‰ ReetrantLock å’Œ ReadWriteLockã€‚</p>
<h4 id="Synchronized"><a href="#Synchronized" class="headerlink" title="Synchronized"></a>Synchronized</h4><blockquote>
<p>åœ¨æ–¹æ³•ä¸Šä½¿ç”¨ Synchronized</p>
</blockquote>
<p>æ–¹æ³•å£°æ˜æ—¶ä½¿ç”¨ï¼Œæ”¾åœ¨èŒƒå›´æ“ä½œç¬¦ä¹‹å,è¿”å›ç±»å‹å£°æ˜ä¹‹å‰ã€‚å³ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è¯¥æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹è¦æƒ³åœ¨æ­¤æ—¶è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåªèƒ½æ’é˜Ÿç­‰å€™ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> number;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">numIncrease</span><span class="hljs-params">()</span>&#123;<br>  number++;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨æŸä¸ªä»£ç æ®µä½¿ç”¨ Synchronized</p>
</blockquote>
<p>å¯ä»¥åœ¨æŸä¸ªä»£ç å—ä¸Šä½¿ç”¨ Synchronized å…³é”®å­—ï¼Œè¡¨ç¤ºåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥æŸä¸ªä»£ç æ®µã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">numDecrease</span><span class="hljs-params">(Object num)</span>&#123;<br>  <span class="hljs-keyword">synchronized</span> (num)&#123;<br>    number++;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨ Synchronized é”ä½æ•´ä¸ªå¯¹è±¡</p>
</blockquote>
<p>synchronizedåé¢æ‹¬å·é‡Œæ˜¯ä¸€å¯¹è±¡ï¼Œæ­¤æ—¶çº¿ç¨‹è·å¾—çš„æ˜¯å¯¹è±¡é”ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) &#123;<br>    <span class="hljs-comment">// ...</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="Lock"><a href="#Lock" class="headerlink" title="Lock"></a>Lock</h4><p>Lock æ˜¯ Javaå¹¶å‘ç¼–ç¨‹ä¸­<strong>å¾ˆé‡è¦çš„ä¸€ä¸ªæ¥å£</strong>ï¼Œç›¸å…³æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Lock</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">lock</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">lockInterruptibly</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException;<br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">()</span>;<br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryLock</span><span class="hljs-params">(<span class="hljs-type">long</span> time, TimeUnit unit)</span> <span class="hljs-keyword">throws</span> InterruptedException;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">()</span>;<br>    Condition <span class="hljs-title function_">newCondition</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¸¸ç”¨æ–¹æ³•</p>
<ul>
<li>lock()<ul>
<li>ç”¨æ¥è·å–é”ã€‚å¦‚æœé”è¢«å…¶ä»–çº¿ç¨‹è·å–ï¼Œåˆ™è¿›è¡Œç­‰å¾…ã€‚</li>
<li>å¦‚æœé‡‡ç”¨Lockï¼Œå¿…é¡»ä¸»åŠ¨å»é‡Šæ”¾é”ï¼Œå¹¶ä¸”åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨é‡Šæ”¾é”</li>
</ul>
</li>
<li>tryLock()<ul>
<li>æ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œå®ƒè¡¨ç¤ºç”¨æ¥å°è¯•è·å–é”ï¼Œå¦‚æœè·å–æˆåŠŸï¼Œåˆ™è¿”å›trueï¼Œå¦‚æœè·å–å¤±è´¥ï¼ˆå³é”å·²è¢«å…¶ä»–çº¿ç¨‹è·å–ï¼‰ï¼Œåˆ™è¿”å›falseï¼Œ</li>
<li>è¿™ä¸ªæ–¹æ³•æ— è®ºå¦‚ä½•éƒ½ä¼šç«‹å³è¿”å›ã€‚åœ¨æ‹¿ä¸åˆ°é”æ—¶ä¸ä¼šä¸€ç›´ç­‰å¾…ã€‚</li>
</ul>
</li>
<li>tryLock(long time, TimeUnit unit)<ul>
<li>å’ŒtryLock()æ–¹æ³•æ˜¯ç±»ä¼¼</li>
<li>åœ¨æ‹¿ä¸åˆ°é”æ—¶<strong>ä¼šç­‰å¾…ä¸€å®šçš„æ—¶é—´</strong>ï¼Œåœ¨æ—¶é—´æœŸé™ä¹‹å†…å¦‚æœè¿˜æ‹¿ä¸åˆ°é”ï¼Œå°±è¿”å›falseã€‚å¦‚æœå¦‚æœä¸€å¼€å§‹æ‹¿åˆ°é”æˆ–è€…åœ¨ç­‰å¾…æœŸé—´å†…æ‹¿åˆ°äº†é”ï¼Œåˆ™è¿”å›trueã€‚</li>
</ul>
</li>
<li>lockInterruptibly()<ul>
<li>å»è·å–é”æ—¶ï¼Œå¦‚æœçº¿ç¨‹æ­£åœ¨ç­‰å¾…è·å–é”ï¼Œåˆ™è¿™ä¸ªçº¿ç¨‹èƒ½å¤Ÿå“åº”ä¸­æ–­ï¼Œå³<strong>ä¸­æ–­çº¿ç¨‹çš„ç­‰å¾…çŠ¶æ€</strong>ã€‚</li>
<li>å½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡ lock.lockInterruptibly() æƒ³è·å–æŸä¸ªé”æ—¶ï¼Œå‡è‹¥æ­¤æ—¶çº¿ç¨‹Aè·å–åˆ°äº†é”ï¼Œè€Œçº¿ç¨‹Båªæœ‰åœ¨ç­‰å¾…ï¼Œé‚£ä¹ˆå¯¹çº¿ç¨‹Bè°ƒç”¨ threadB.interrupt() æ–¹æ³•èƒ½å¤Ÿä¸­æ–­çº¿ç¨‹Bçš„ç­‰å¾…è¿‡ç¨‹ã€‚</li>
<li>ç”±äº lockInterruptibly() çš„å£°æ˜ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œæ‰€ä»¥ lock.lockInterruptibly() å¿…é¡»æ”¾åœ¨tryå—ä¸­æˆ–è€…åœ¨è°ƒç”¨lockInterruptibly() çš„æ–¹æ³•å¤–å£°æ˜æŠ›å‡º InterruptedExceptionã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
</blockquote>
<p>lock()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Lock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> ...;<br>lock.lock();<br><span class="hljs-keyword">try</span>&#123;<br>    <span class="hljs-comment">//å¤„ç†ä»»åŠ¡</span><br>&#125;<span class="hljs-keyword">catch</span>(Exception ex)&#123;<br>     <br>&#125;<span class="hljs-keyword">finally</span>&#123;<br>    lock.unlock();   <span class="hljs-comment">//é‡Šæ”¾é”</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>tryLock()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Lock</span> lock = ...;<br><span class="hljs-keyword">if</span>(lock.<span class="hljs-title function_">tryLock</span>()) &#123;<br>     <span class="hljs-keyword">try</span>&#123;<br>         <span class="hljs-comment">//å¤„ç†ä»»åŠ¡</span><br>     &#125;<span class="hljs-keyword">catch</span>(<span class="hljs-title class_">Exception</span> ex)&#123;<br>         <br>     &#125;<span class="hljs-keyword">finally</span>&#123;<br>         lock.<span class="hljs-title function_">unlock</span>();   <span class="hljs-comment">//é‡Šæ”¾é”</span><br>     &#125;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">//å¦‚æœä¸èƒ½è·å–é”ï¼Œåˆ™ç›´æ¥åšå…¶ä»–äº‹æƒ…</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>lockInterruptibly()</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">public <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span>() throws <span class="hljs-title class_">InterruptedException</span> &#123;<br>    lock.<span class="hljs-title function_">lockInterruptibly</span>();<br>    <span class="hljs-keyword">try</span> &#123;<br>     <span class="hljs-comment">//.....</span><br>    &#125;<br>    <span class="hljs-keyword">finally</span> &#123;<br>        lock.<span class="hljs-title function_">unlock</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<p>ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨Lockå¿…é¡»åœ¨try{}catch{}å—ä¸­è¿›è¡Œï¼Œå¹¶ä¸”å°†<strong>é‡Šæ”¾é”çš„æ“ä½œæ”¾åœ¨finallyå—ä¸­è¿›è¡Œ</strong>ï¼Œä»¥ä¿è¯é”ä¸€å®šè¢«è¢«é‡Šæ”¾ï¼Œé˜²æ­¢æ­»é”çš„å‘ç”Ÿã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å–äº†é”ä¹‹åï¼Œæ˜¯ä¸ä¼šè¢«interrupt()æ–¹æ³•ä¸­æ–­çš„ã€‚<br>å•ç‹¬è°ƒç”¨ interrupt() æ–¹æ³•ä¸èƒ½ä¸­æ–­æ­£åœ¨è¿è¡Œè¿‡ç¨‹ä¸­çš„çº¿ç¨‹ï¼Œåªèƒ½<strong>ä¸­æ–­é˜»å¡è¿‡ç¨‹ä¸­çš„çº¿ç¨‹</strong>ã€‚å› æ­¤å½“é€šè¿‡lockInterruptibly()æ–¹æ³•è·å–æŸä¸ªé”æ—¶ï¼Œå¦‚æœä¸èƒ½è·å–åˆ°ï¼Œ<strong>åªæœ‰è¿›è¡Œç­‰å¾…çš„æƒ…å†µä¸‹ï¼Œæ˜¯å¯ä»¥å“åº”ä¸­æ–­çš„</strong>ã€‚<br>è€Œ<strong>ç”¨synchronizedä¿®é¥°çš„è¯</strong>ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…æŸä¸ªé”çš„çŠ¶æ€ï¼Œæ˜¯æ— æ³•è¢«ä¸­æ–­çš„ï¼Œåªæœ‰ä¸€ç›´ç­‰å¾…ä¸‹å»ã€‚</p>
</blockquote>
<hr>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://javaguide.cn/java/concurrent/java-concurrent-questions-01.html">https://javaguide.cn/java/concurrent/java-concurrent-questions-01.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/fmgao-technology/p/11077543.html">https://www.cnblogs.com/fmgao-technology/p/11077543.html</a></li>
<li><a target="_blank" rel="noopener" href="https://caochenlei.blog.csdn.net/article/details/119992847">https://caochenlei.blog.csdn.net/article/details/119992847</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1497476">https://cloud.tencent.com/developer/article/1497476</a></li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java%E5%9F%BA%E7%A1%80/" class="category-chain-item">JavaåŸºç¡€</a>
  
  
    <span>></span>
    
  <a href="/categories/Java%E5%9F%BA%E7%A1%80/Thread/" class="category-chain-item">Thread</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/java/" class="print-no-link">#java</a>
      
        <a href="/tags/thread/" class="print-no-link">#thread</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Javaå¹¶å‘ç¼–ç¨‹_åŸºç¡€æ¦‚å¿µ</div>
      <div>https://varcel.luoqi.icu/2023/11/15/Javaå¹¶å‘ç¼–ç¨‹_åŸºç¡€æ¦‚å¿µ/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Luo QI</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´11æœˆ15æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/11/17/Docker%E5%85%A5%E9%97%A8_%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" title="Dokcerå…¥é—¨_åŸºç¡€æ¦‚å¿µ">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Dokcerå…¥é—¨_åŸºç¡€æ¦‚å¿µ</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/11/15/Java%E9%9B%86%E5%90%88_HashMap%E5%AD%A6%E4%B9%A0/" title="Javaé›†åˆ_HashMapå­¦ä¹ ">
                        <span class="hidden-mobile">Javaé›†åˆ_HashMapå­¦ä¹ </span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <div style="font-size: 0.85rem"> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
